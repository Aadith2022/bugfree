{% load static %}
<!DOCTYPE html>
<html lang = "en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> BugFree </title>
    <link rel="stylesheet" href="{% static 'debugger/styles.css' %}">
</head>

<body>

    <header>
        <h2 class = "logo"> BugFree </h2>
        <nav class="navigation">
            <a href = "#" onclick = "show()"> Home </a>
            <button class = "btn-pop">Login</button>
        </nav>
    </header>

    <div class = "home_description_container" style = "display:none">

        <div class = "home_description">
            <span class="new-icon-close"><ion-icon name="close" onclick = "hide()"></ion-icon></span>

            <h2>Welcome to BugFree</h2><br>
            <p>BugFree is a free bug tracking sytem that blends user-friendliness and robust-functionality together, in seamless harmony. Due to the simple nature of Bugfree's design, within a matter of minutes after signing up, users can efficently manage their projects, and collaborate with their teammates, so they can deliver great projects on time. Sign up today to get started!</p>
        </div>

    </div>

    <div class= "login_wrapper" style="display:none">
        <span class="icon-close"><ion-icon name="close"></ion-icon></span>

        <div class = "login-box">
            <h2> Login </h2>
            <form action = "{% url 'index' %}" method = "POST">
                {% csrf_token %}
                <div class="login-input-box">
                    <span class = "icon"><ion-icon name="mail"></ion-icon></span>
                    <input type="email" name = "login_email" required>
                    <label> Email </label>
                </div>
                <div class="login-input-box">
                    <span class = "icon"><ion-icon name="business"></ion-icon></span>
                    <input type="text" name = "login_institution" required>
                    <label> Institution </label>
                </div>
                <div class="login-input-box">
                    <span class = "icon"><ion-icon name="lock-closed"></ion-icon></span>
                    <input type="password" name = "login_admin_pass" placeholder = "Not Required">
                    <label> Admin Password </label>
                </div>
                <div class="login-input-box">
                    <span class = "icon"><ion-icon name="lock-closed"></ion-icon></span>
                    <input type="password" name = "login_password" required>
                    <label> Password </label>
                </div>
                <div class="forgot-pass">
                    <a href="#"> Forgot Password? </a>
                </div>
                <button type = "submit" class = "btn" name = "login"> Login  </button>
                <div class="login-register">
                    <p> Don't have an Account?  <a href= "#" class = "register-link">Register Here</a></p>
                    <p> Need to Register your Institution? <a href="#" class="institution-link">Connect</a></p>
                </div>
                
            </form>
        </div>


        <div class = "registration-box">
            <h2> Register </h2>
            <form action = "{% url 'index' %}" method = "POST">
                {% csrf_token %}
                <div class="login-input-box">
                    <span class = "icon"><ion-icon name="person"></ion-icon></span>
                    <input type="text" name = "register_username" required>
                    <label> Username </label>
                </div>
                <div class="login-input-box">
                    <span class = "icon"><ion-icon name="mail"></ion-icon></span>
                    <input type="email" name = "register_email" required>
                    <label> Email </label>
                </div>
                <div class="login-input-box">
                    <span class = "icon"><ion-icon name="business"></ion-icon></span>
                    <input type="text" name = "register_institution" required>
                    <label> Institution </label>
                </div>
                <div class="login-input-box">
                    <span class = "icon"><ion-icon name="lock-closed"></ion-icon></span>
                    <input type="password" name = "register_password" required>
                    <label> Password </label>
                </div>
                <button type = "submit" class = "btn" name = "register"> Register  </button>
                <div class="login-register">
                    <p> Already have an account?  <a href= "#" class = "login-link">Login</a></p>
                    <p> Need to Register your Institution?  <a href= "#" class = "institution-link">Connect</a></p>
                </div>
                
            </form>
        </div>


        <div class = "institution-reg-box">
            <h2> Register </h2>
            <form action = "{% url 'index' %}" method = "POST">
                {% csrf_token %}
                <div class="login-input-box">
                    <span class = "icon"><ion-icon name="person"></ion-icon></span>
                    <input type="text" name = "in_username" required>
                    <label> Username </label>
                </div>
                <div class="login-input-box">
                    <span class = "icon"><ion-icon name="mail"></ion-icon></span>
                    <input type="email" name = "in_email" required>
                    <label> Email </label>
                </div>
                <div class="login-input-box">
                    <span class = "icon"><ion-icon name="business"></ion-icon></span>
                    <input type="text" name = "in_institution" required>
                    <label> Institution </label>
                </div>
                <div class="login-input-box">
                    <span class = "icon"><ion-icon name="lock-closed"></ion-icon></span>
                    <input type="password" name = "in_admin_password" placeholder = "Enter a password that will be shared by all admin" required>
                    <label> Admin Password </label>
                </div>
                <div class="login-input-box">
                    <span class = "icon"><ion-icon name="lock-closed"></ion-icon></span>
                    <input type="password" name = "in_password" required>
                    <label> Password </label>
                </div>
                <button type = "submit" class = "btn" name = "register_in"> Register  </button>
                <div class="login-register">
                    <p> Institution already registered?  <a href= "#" class = "login-link">Login</a></p>
                </div>
                
            </form>
        </div> 
        
        <div id = "myModal" style = "display:none">

            <div class = "modal_content">
                <span class = "close">&times;</span>
                <p id = "modal_text"></p>
            </div>
    
        </div>

    </div>

    <style>

        #myModal {
            position: fixed;
            padding-top: 100px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
        }

        .modal_content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            width: 80%;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 3px;
        }

        .close {
            color: #aaaaaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }

    </style>

    <script>

        function show() {

            document.querySelector('.home_description_container').style.display = 'flex';

        }

        function hide() {

            document.querySelector('.home_description_container').style.display = 'none';

        }

    </script>

    {% if message %}
        
        <script>

            if ('{{message}}' == 'Please enter your Admin Password') {

                wrapper = document.querySelector('.login_wrapper');
                wrapper.style.display = 'flex';
                wrapper.classList.add('active-pop');

                login_box = document.querySelector('.login-box');
                login_box.style.display = 'block';

            } else if ('{{message}}' == 'Invalid Credentials') {

                wrapper = document.querySelector('.login_wrapper');
                wrapper.style.display = 'flex';
                wrapper.classList.add('active-pop');

                login_box = document.querySelector('.login-box');
                login_box.style.display = 'block';

            } else if ('{{message}}' == 'You are not a registered administrator for this Institution') {

                wrapper = document.querySelector('.login_wrapper');
                wrapper.style.display = 'flex';
                wrapper.classList.add('active-pop');

                login_box = document.querySelector('.login-box');
                login_box.style.display = 'block';

            } else if ('{{message}}' == 'Institution cannot be found') {

                wrapper = document.querySelector('.login_wrapper');
                wrapper.style.display = 'flex';
                wrapper.classList.add('active-pop');

                login_box = document.querySelector('.login-box');
                login_box.style.display = 'block';

            } else if ('{{message}}' == 'Please check your spelling of the Institution name or Admin password') {

                wrapper = document.querySelector('.login_wrapper');
                wrapper.style.display = 'flex';
                wrapper.classList.add('active-pop');

                login_box = document.querySelector('.login-box');
                login_box.style.display = 'block';

            } else if ('{{message}}' == 'You are not a member of this Institution') {

                wrapper = document.querySelector('.login_wrapper');
                wrapper.style.display = 'flex';
                wrapper.classList.add('active-pop');

                login_box = document.querySelector('.login-box');
                login_box.style.display = 'block';

            } else if ('{{message}}' == 'This email is already in use for this institution') {

                wrapper = document.querySelector('.login_wrapper');
                wrapper.style.display = 'flex';

                wrapper.classList.add('active-pop');
                wrapper.classList.add('active');

                reg_box = document.querySelector('.registration-box');
                reg_box.style.display = 'block';

            } else if ('{{message}}' == 'This Institution has not been registered') {

                wrapper = document.querySelector('.login_wrapper');
                wrapper.style.display = 'flex';

                wrapper.classList.add('active-pop');
                wrapper.classList.add('active');

                reg_box = document.querySelector('.registration-box');
                reg_box.style.display = 'block';

            } else if ('{{message}}' == 'Sorry, an Institution with this name already exists') {

                wrapper = document.querySelector('.login_wrapper');
                wrapper.style.display = 'flex';

                wrapper.classList.add('active-pop');
                wrapper.classList.add('institute');

                in_box = document.querySelector('.institution-reg-box');
                in_box.style.display = 'block';

            }

            modal = document.getElementById('myModal')

            p = document.getElementById('modal_text')

            p.innerHTML = '{{message}}'

            close = document.getElementsByClassName('close')[0];

            modal.style.display = 'block';

            close.onclick = function() {
                modal.style.display = 'none';
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            }

        </script>

    {% endif %} 
  

    
    <script src = "{% static 'debugger/script.js' %}"></script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <style>
        ::placeholder {
          color: #fff;
          font-weight: 10;
          font-size: 0.75em;
          opacity: 0.75; /* Firefox */
        }
        
        .message {
            color: #fff;
            font-weight: 600;
            font-size: 0.95em;
        }

        </style>

</body>

</html>